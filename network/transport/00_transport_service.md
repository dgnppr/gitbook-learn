# 트랜스포트 계층 요약

---

## 네트워크 계층이 제공하는 서비스

![image](https://github.com/dragonappear/learn/assets/89398909/1ff48ef1-0a5a-4f82-8109-6c4798a5db23)

<br>

### 호스트 간 통신

호스트의 NIC(Network Interface Card) 주소를 사용하여 인터넷 호스트 간 패킷 전달

### Best Effort 서비스

- 자원이 허락하는 범위 내에서 최선의 통신 서비스 제공
- 자원이 부족한 경우
  - 지연 시간 발생
  - 패킷 훼손/손실 발생 가능

### 비연결형 서비스

- 패킷 전달 경로가 다를 수 있음
- 패킷 도착 순서가 바뀔 수 있음

<br>

---

## 트랜스포트 계층이 제공하는 서비스

<br>

### 응용 프로세스 간 통신

네트워크 계층 서비스를 이용하여 응용 프로세스간 통신

<br>

### 세그먼테이션/리어셈블리

- 응용 프로세스가 전송 요구하는 메시지를 네트워크 계층이 교환 가능한 크기의 단위(세그먼트)로 나누어 네트워크 계층에 전달
- 네트워크 계층을 통해 수신되는 세그먼트들을 메시지로 재조립하여 응용 프로세스에 전달

<br>

### 멀티플렉싱/디멀티플렉싱

- 멀티플렉싱: 여러 응용 프로세스가 전송 요구하는 메시지들을 동시에 전송하기 위해 구분 가능한 정보를 추가하여 하나의 링크에 전송하는 것이다.
- 디멀티플렉싱: 멀티플렉싱된 메시지를 수신 호스트에서 올바른 프로세스에게 전달하는 것이다.

<br>

### 무결성 확인

- 수신 세그먼트 비트 손상 여부 확인
- Checksum 기술 적용

<br>

### 신뢰 전송

- 오류 복구: 손상 또는 손실 세그먼트 재전송을 통한 복구
- 흐름 제어: 수신 버퍼 오버플로우 방지

<br>

### 혼잡 제어

- 전송량 조절을 통해 네트워크 혼잡 상황 회피 및 해소

---

## 소켓

### 소켓

- 트랜스포트 계층이 제공하는 응용 프로세스 간 통신을 위한 자료구조

### 연결형 소켓

![download](https://github.com/dragonappear/learn/assets/89398909/ef4eade0-43f2-4040-8bcb-e44473004531)

- 통신 소켓 간에 1:1 연결 설정
- 소켓 식별 = 출발지 (IP 주소 + Port 번호) + 목적지 (IP 주소 + Port 번호)
- 1:1 통신

<br>

### 비연결형 통신

![udp-header](https://github.com/dragonappear/learn/assets/89398909/07fb61fb-8ce4-4dc8-a2b5-e594298bce61)

- 통신 소켓 간에 1:1 연결 미설정
- 소켓 식별 = 목적지 IP 주소 + 목적지 포트 번호
- 1:N 통신 가능

<br>

---

## CheckSum

![image](https://github.com/dragonappear/learn/assets/89398909/68edd3ab-5dae-4bcb-8e13-b0ff0d44748c)

### 목적

무결성 확인

### 특징

<img width="644" alt="image" src="https://github.com/dragonappear/learn/assets/89398909/53b2086d-676e-4872-851a-13cdc585c9f1">

#### 송신자

1. 송신하는 메시지(데이터그램)을 정해진 길이(16bits) 길이의 데이터 단위로 나눔
2. 모든 데이터 단위를 1의 보수 연산으로 더하여 합을 구함
3. 합의 1의 보수를 `Checksum`으로 생성하고, `Checksum`을 패킷(데이터그램)에 추가하여 전송


#### 수신자

1. 수신한 메시지(데이터그램)을 정해진 길이(16bits) 길이의 데이터 단위로 나눔
2. 모든 데이터 단위를 1의 보수 연산으로 더하여 합을 구함
3. 합이 0이면 성공적인 수신, 아니면 오류 검출

<br>

오류 검출율이 높고 사용하기에 단순하나,  각 데이터 단위에서 발생하는 오류의 합이 0인 경우는 검출 불가하고, 체크섬을 변경하지 않는 오류 검출 불가

